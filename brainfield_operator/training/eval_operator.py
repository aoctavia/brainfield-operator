def evaluate_on_test_set(model, test_loader, device, save_dir):
    """
    Compute metrics and optionally save example predictions
    and error maps for visualization.
    """
    ...
